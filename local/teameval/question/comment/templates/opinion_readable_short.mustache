{{!

	@template teamevalquestion_comment/opinion_readable_short

}}
{{#comment}}<div id="full-comment-{{uniqid}}" class="teamevalquestion-comment-full-comment">{{comment}}</div>{{/comment}}
{{short}}{{#comment}} <a id="show-comment-{{uniqid}}" class="teamevalquestion-comment-show-comment">{{#pix}} i/info, core, Show full comment {{/pix}}</a>{{/comment}}
{{#js}}{{#_notset}}<script>{{/_notset}}

require(['jquery', 'core/notification'], function($, Notification) {

	var _fullComment = $('#full-comment-{{uniqid}}');

	_fullComment.detach();

	var _showing = false;

	$('#show-comment-{{uniqid}}').click(function(evt) {

		if(!_showing) {

			$('.local-teameval-containerbox').append(_fullComment);

			_showing = true;

			var position = $(evt.target).position();

			var left = position.left;
			var maxLeft = $('.local-teameval-containerbox').width() / 2 - 15;
			if (left > maxLeft) {
				left = maxLeft;
			}

			_fullComment.css({
				'position':'absolute',
				'top': position.top,
				'left': left
			});

			evt.stopPropagation();

			$(document).click(function() {

				_fullComment.detach();
				_showing = false;

			});

		}

	});
	

});

{{/js}}