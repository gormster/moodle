<div id="question-content-{{uniqid}}">This is a editing test <input type="text" value="{{{test}}}" /></div>
{{#js}}
// This is necessary because require.js will NOT run synchronously
//var questionContainer = document.querySelector('*[data-script-marker]');

require(['jquery', 'core/ajax', 'core/notification'], function($, ajax, notification) {

	var questionContainer = $('#question-content-{{uniqid}}').closest('.question-container');

	questionContainer.on("save", function(evt, ordinal) {
		console.log(ordinal);
		var deferred = $.Deferred();
		var data = { cmid: {{_cmid}} };
		{{#id?}}
		data.id = {{id}};
		{{/id?}}
		data.ordinal = ordinal;
		data.test = questionContainer.find('input').val();
		var promises = ajax.call([{
			methodname: 'teamevalquestion_likert_update_question',
			args: data
		}]);

		console.log(data);

		promises[0].done(function(result) {
			data.id = result;
			deferred.resolve(data, data);
		}).fail(notification.exception);
		
		return deferred;
	});

	questionContainer.on("delete", function () {
		var deferred = $.Deferred();
		deferred.resolve();
		return deferred;
	});

});
{{/js}}