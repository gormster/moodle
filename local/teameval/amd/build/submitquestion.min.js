define(["jquery","core/templates","core/ajax","core/notification","core/str"],function(a,b,c,d,e){var f;return{submit:function(){var b=a("#local-teameval-questions"),c=[];b.find(".question-container").each(function(){var b=a('<div class="ui-blocker" />');a(this).append(b);var d=a(this).triggerHandler("submit");c.push(d),d.always(function(){b.remove()})});var f=a.when.apply(a,c);f.done(function(){var b=a.grep(arguments,function(a){if(a)return a.incomplete===!0}).length;if(b>0){var c=1==b?"incompletewarning1":"incompletewarning";e.get_string(c,"local_teameval",b).done(function(b){a(".local-teameval-submit-buttons .results.incomplete").text(b).show("fast")})}else a(".local-teameval-submit-buttons .results.incomplete").hide("fast"),a(".local-teameval-submit-buttons .results.saved").show("fast").delay(5e3).hide("fast")}).fail(d.exception)},initialise:function(c){f=c,b.render("local_teameval/submit_buttons",{}).done(function(c,d){var e=a(".local-teameval-containerbox");e.append(c),b.runTemplateJS(d),a(".local-teameval-submit-buttons .submit").click(this.submit)}.bind(this))}}});